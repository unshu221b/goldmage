{% load static tailwind_tags %}
{% load custom_filters %}
<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'dist/my.css' %}">
  {% tailwind_css %}
  

  <title>{% block head_title %}GoldMage - Dashboard{% endblock head_title %}</title>
</head>
<body class="bg-gm" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
  {% include 'base/navbar-dashboard.html' %}
  <!-- Main Content -->
  <div class="p-4 sm:ml-64" style="padding-top: 40px;">
    <div class="dash-body border-2 border-dashed rounded-lg border-gray-700 mt-14">
       <div class="grid grid-cols-3 gap-4 mb-4 dash-row">
          <div class="flex items-center justify-center h-24 rounded-sm bg-gm">
                    <!-- Dashboard Header -->
                    <div class="category-container font-bold">
                        <button class="Pill_Dashboard active" data-category="trending">
                          <span>Home</span>
                        </button>
                    </div>

          </div>
          <!-- Continue Watching Section -->
            <div class="mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-semibold">Continue Watching</h2>
                    <a href="#" class="text-sm text-teal-400 hover:text-teal-300">See all</a>
                 </div>
                 
                 <div class="relative carousel-container">
                    <!-- Arrow Left -->
                    <button class="carousel-nav prev absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full opacity-0 transition-opacity duration-300">
                       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                       </svg>
                    </button>
        
                    <!-- Slides Container -->
                    <div class="slides-container overflow-hidden">
                        <div class="slides-track flex transition-transform duration-300" style="gap: 1rem;">
                            {% for lesson in continue_watching %}
                            <div class="video-card flex-none w-1/6">
                                <a href="{{ lesson.get_absolute_url }}" class="block relative group">
                                    <div class="aspect-w-16 aspect-h-9 bg-gray-800 rounded-lg overflow-hidden">
                                        {% if lesson.get_thumbnail %}
                                            <img src="{{ lesson.get_thumbnail }}" alt="{{ lesson.title }}" class="object-cover w-full h-full">
                                        {% endif %}
                                        {% if lesson.video %}
                                            <div class="absolute bottom-2 right-2 px-2 py-1 text-xs bg-black/70 rounded">
                                                <!-- Add video duration if available -->
                                                {{ lesson.video.duration|default:"" }}
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="mt-2">
                                        <h3 class="text-sm font-semibold text-white truncate">{{ lesson.title }}</h3>
                                        <p class="text-xs text-gray-400">{{ lesson.course.title }}</p>
                                    </div>
                                </a>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Arrow Right -->
                    <button class="carousel-nav next absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full opacity-0 transition-opacity duration-300">
                       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                       </svg>
                    </button>
                 </div>
              </div>
        
              <!-- Season 4 Section -->
              <div class="mb-12">
                 <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-semibold">Season 4</h2>
                    <a href="#" class="text-sm text-teal-400 hover:text-teal-300">See all</a>
                 </div>
                 <!-- Similar grid structure as above -->
              </div>
        
              <!-- Featured Content Section -->
              <div class="mb-12">
                 <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-semibold">Featured Content</h2>
                    <a href="#" class="text-sm text-teal-400 hover:text-teal-300">See all</a>
                 </div>
                 <!-- Similar grid structure as above -->
              </div>
           </div>
        </div>

 


<!-- Add this script at the end of the file -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const closeButton = document.getElementById('close-verification-modal');
    const modal = document.querySelector('[role="dialog"]');
    
    if (closeButton && modal) {
        closeButton.addEventListener('click', function() {
            modal.style.display = 'none';
        });
    }

    const resendButton = document.getElementById('resend-verification');
    
    if (resendButton) {
        resendButton.addEventListener('click', function() {
            // Disable button to prevent multiple clicks
            resendButton.disabled = true;
            resendButton.textContent = 'Sending...';
            
            fetch('/resend-verification/', {
                method: 'POST',
                headers: {
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                    'Content-Type': 'application/json'
                },
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    // Show success message
                    alert(data.message);
                } else {
                    // Show error message
                    alert(data.message);
                }
            })
            .catch(error => {
                alert('An error occurred. Please try again.');
                console.error('Error:', error);
            })
            .finally(() => {
                // Re-enable button after request completes
                resendButton.disabled = false;
                resendButton.textContent = 'Resend Email';
            });
        });
    }
});
</script>
<script src="{% static 'js/dashboard.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"></script>
</body>
</html>